@page "/mycomponent"

<h3>MyComponent</h3>

<div>
    <input placeholder="Name" @bind="Name" />
    <input placeholder="LastName" @bind="LastName" />
    <button @onclick="AddPersona">Add Person</button> 
</div>

@if (P1 != null && P1.Any())
{
    <table>
        @foreach (var persona in P1)
        {
            <tr>
                <td>@persona.FirstName</td>
                <td>@persona.LastName</td>
            </tr>
        }
    </table>
}

@code {
    private string Name { get; set; } = "Alejandro";
    private string LastName { get; set; } = "";

    private List<BlazorApp.Models.Persona> P1 { get; set; } = new List<BlazorApp.Models.Persona>();

    protected override async Task OnInitializedAsync()
    {
        await Task.Run(() => getPersonaData());
    }

    private void getPersonaData()
    {
        P1.AddRange(new List<BlazorApp.Models.Persona>
        {
            new BlazorApp.Models.Persona { FirstName = "Sergio", LastName = "Sopelana" },
            new BlazorApp.Models.Persona { FirstName = "Alejandro", LastName = "Paso" },
            new BlazorApp.Models.Persona { FirstName = "Jon", LastName = "Cruz" },
            new BlazorApp.Models.Persona { FirstName = "Juan", LastName = "De Tal" }
        });
    }

    private void AddPersona()
    {
        if (!string.IsNullOrWhiteSpace(Name) && !string.IsNullOrWhiteSpace(LastName))
        {
            P1.Add(new BlazorApp.Models.Persona
            {
                FirstName = Name,
                LastName = LastName
            });

            Name = "";
            LastName = "";

            StateHasChanged(); // Forzar actualización de la UI
        }
    }
}

